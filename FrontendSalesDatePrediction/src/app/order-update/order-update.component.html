<h2 style="background-color: green; color: white; padding: 10px;">{{ customerName }}-<span class="new-order">New Order</span></h2>

<form (ngSubmit)="onSubmit()" #orderForm="ngForm" style="border: 2px solid green; padding: 20px;">

  <!-- Employee and Shipper -->
  <div style="display: flex; justify-content: space-between;">
    <mat-form-field appearance="fill" style="flex: 1; margin-right: 10px;">
        <mat-label>Employee*</mat-label>
        <mat-select [(ngModel)]="order.empid" name="employeeId" required>
          <mat-option *ngFor="let employee of employees" [value]="employee.empid">
            {{ employee.fullName }}
          </mat-option>
        </mat-select>
      </mat-form-field>

    <mat-form-field appearance="fill" style="flex: 1; margin-right: 10px;">
      <mat-label>Shipper*</mat-label>
      <mat-select [(ngModel)]="order.shipperId" name="shipperId" required>
        <mat-option *ngFor="let ship of shippers" [value]="ship.shipperId">
          {{ ship.companyName }}
        </mat-option>
      </mat-select>
      </mat-form-field>
  
  </div>

  <!-- Ship Name -->
  <mat-form-field appearance="fill" style="width: 100%;">
    <mat-label>Ship Name*</mat-label>
    <input matInput [(ngModel)]="order.shipname" name="shipname" required>
  </mat-form-field>

  <!-- Ship Address, City, Country -->
  <div style="display: flex; justify-content: space-between;">
    <mat-form-field appearance="fill" style="flex: 1; margin-right: 10px;">
      <mat-label>Ship Address*</mat-label>
      <input matInput [(ngModel)]="order.shipaddress" name="shipaddress" required>
    </mat-form-field>

    <mat-form-field appearance="fill" style="flex: 1; margin-right: 10px;">
      <mat-label>Ship City*</mat-label>
      <input matInput [(ngModel)]="order.shipcity" name="shipcity" required>
    </mat-form-field>

    <mat-form-field appearance="fill" style="flex: 1;">
      <mat-label>Ship Country*</mat-label>
      <input matInput [(ngModel)]="order.shipcountry" name="shipcountry" required>
    </mat-form-field>
  </div>

  <!-- Order Date, Required Date, Shipped Date -->
  <div style="display: flex; justify-content: space-between; margin-top: 10px;">
    <mat-form-field appearance="fill" style="flex: 1; margin-right: 10px;">
      <mat-label>Order Date*</mat-label>
      <input matInput [(ngModel)]="order.orderdate" name="orderdate" required type="date">
    </mat-form-field>

    <mat-form-field appearance="fill" style="flex: 1; margin-right: 10px;">
      <mat-label>Required Date*</mat-label>
      <input matInput [(ngModel)]="order.requireddate" name="requireddate" required type="date">
    </mat-form-field>

    <mat-form-field appearance="fill" style="flex: 1;">
      <mat-label>Shipped Date*</mat-label>
      <input matInput [(ngModel)]="order.shippeddate" name="shippeddate" required type="date">
    </mat-form-field>
  </div>

  <!-- Freight -->
  <mat-form-field appearance="fill" style="width: 100%; margin-top: 10px;">
    <mat-label>Freight*</mat-label>
    <input matInput [(ngModel)]="order.freight" name="freight" required type="number">
  </mat-form-field>

  <h3>Order Details</h3>

  <!-- Solo un detalle -->
  <div *ngIf="order.orderDetails.length > 0" >
    
    <mat-form-field appearance="fill" style="flex: 1; width: 100%;">
      <mat-label>Product*</mat-label>
      <mat-select [(ngModel)]="order.orderDetails[0].productid" name="productid" required>
        <mat-option *ngFor="let product of products" [value]="product.productid">{{ product.productname }}</mat-option>
      </mat-select>
    </mat-form-field>
  
    <mat-form-field appearance="fill" style="flex: 1; margin-right: 10px;">
      <mat-label>Unit Price*</mat-label>
      <input matInput [(ngModel)]="order.orderDetails[0].unitprice" name="unitprice" required type="number">
    </mat-form-field>
  
    <mat-form-field appearance="fill" style="flex: 1; margin-right: 10px;">
      <mat-label>Quantity*</mat-label>
      <input matInput [(ngModel)]="order.orderDetails[0].qty" name="qty" required type="number">
    </mat-form-field>
  
    <mat-form-field appearance="fill" style="flex: 1;">
      <mat-label>Discount*</mat-label>
      <input matInput [(ngModel)]="order.orderDetails[0].discount" name="discount" required type="number">
    </mat-form-field>
  
  </div> 


  

  <!-- Buttons -->
  <div style="display: flex; justify-content: flex-end; margin-top: 20px;">
    <button mat-raised-button style="background-color: transparent; color: green; text-transform: uppercase; margin-left: 10px;" (click)="onClose()">CLOSE</button>
    <button mat-raised-button type="button" style="background-color: green; color: white; margin-top: 10px;" (click)="createOrder()">SAVE</button>

  </div>

</form>
